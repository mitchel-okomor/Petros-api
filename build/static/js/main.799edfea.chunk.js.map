{"version":3,"sources":["components/services/history.js","components/helpers/checkLoggin.js","components/login.js","components/helpers/Logout.js","components/header.js","components/news.js","components/newsListItem.js","components/Loading.js","components/newsList.js","components/admin.js","components/services/withAuth.js","components/edit.js","App.js","index.js"],"names":["history","createBrowserHistory","confirm","token","localStorage","exp","jwt_decode","Date","now","removeItem","Login","props","handleChange","event","setState","target","name","value","handleSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","state","then","response","json","data","status","loginStatus","loginMessage","message","userId","user","setItem","push","catch","err","console","log","checkLogin","className","htmlFor","type","id","placeholder","this","onChange","required","onClick","React","Component","logout","window","location","reload","Header","to","News","files","a","fd","FormData","append","title","description","image","date","url","axios","post","onUploadProgress","progressEvent","Math","round","loaded","total","alert","NewsListItem","deleteArticle","article","date_created","src","image_url","alt","Loading","style","width","height","NewsList","loading","error","getArticles","undefined","articles","map","key","withAuth","AuthComponent","isAutenticated","handleRerender","getUser","firstname","rerenderHandler","Edit","match","params","stateData","put","App","History","exact","path","component","Admin","PageLogin","EditArticle","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.799edfea.chunk.js","sourcesContent":["import { createBrowserHistory } from 'history';\r\n\r\nconst history = createBrowserHistory();\r\nexport default history;","import jwt_decode from 'jwt-decode';\r\n\r\nconst confirm = () => {\r\n  const token = localStorage['token'];\r\n\r\n  if (token) {\r\n    const decoded = jwt_decode (token);\r\n    const {exp} = decoded;\r\n    if (Date.now () >= exp * 1000) {\r\n      localStorage.removeItem ('token');\r\n      localStorage.removeItem ('userId');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport default confirm;\r\n","import React from 'react';\r\nimport './login.css';\r\nimport history from '../components/services/history';\r\nimport checkLogin from './helpers/checkLoggin';\r\n\r\n\r\nclass Login extends React.Component{\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            loginMessage:\"\"\r\n        };\r\n    }\r\n    \r\n    componentDidMount(){\r\n//check if it's still authenticated\r\nconst isConfirmed = checkLogin ();\r\n\r\nif (!isConfirmed) {\r\n  history.push ('/login');\r\n} else {\r\n    history.push ('/admin'); \r\n}\r\n    }\r\n   \r\n      handleChange = event => {\r\n        this.setState({\r\n          [event.target.name]: event.target.value\r\n        });\r\n      }\r\n    \r\n   handleSubmit = event => {\r\n   event.preventDefault();\r\n       const url = '/login';\r\n        \r\n        fetch(url, {\r\nmethod: 'post',\r\nheaders: {\r\n    // 'Content-Type': 'application/x-www-form-urlencoded',\r\n  'Content-Type': 'application/json' \r\n},\r\nbody: JSON.stringify(this.state)\r\n        })\r\n        .then(response => response.json())\r\n        .then(data =>{ \r\n          if(data.status ===\"error\"){\r\n            this.setState({\r\n              loginStatus : data.status,\r\n              loginMessage: data.message,\r\n          })\r\n          }\r\n          else{\r\n            this.setState({\r\n            loginStatus : data.status,\r\n            loginMessage: data.message,\r\n            token: data.data.token,\r\n            userId: data.data.user\r\n        });\r\n        //save user datat \r\n        localStorage.setItem('token', this.state.token);\r\n        localStorage.setItem('userId', this.state.userId);\r\n    history.push('/admin');\r\n          }\r\n          })\r\n        .catch((err)=>{\r\n            console.log(err);\r\n        })\r\n    \r\n      }\r\n    \r\n    render(){ \r\n\r\n        return(\r\n         \r\n  <div className=\"login\">\r\n  <br />\r\n  <br />\r\n<br />\r\n    <h1>Login to Admin Panel</h1>\r\n    <br />\r\n\r\n    <form >\r\n      <fieldset>\r\n    \r\n<div>\r\n          <label htmlFor=\"first_name\" >email:</label> <br />\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            placeholder=\"Enter email address\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}  \r\n            required\r\n       />\r\n</div>\r\n        <div>\r\n          <label htmlFor=\"last_name\" >Password:</label><br />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            placeholder=\"Enter password\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}  \r\n            required\r\n          />\r\n        </div>\r\n        <div className={this.state.loginStatus}>{this.state.loginMessage}</div>\r\n        <button onClick={this.handleSubmit}>Submit</button>\r\n      </fieldset>\r\n    </form>\r\n  \r\n\r\n    </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Login;","import history from '../services/history';\r\n\r\n\r\n const logout = ()=>{\r\n  \r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userId');\r\nconsole.log(\"logged out successfully\");\r\nhistory.push('/');\r\nwindow.location.reload();\r\n \r\n};\r\n\r\n\r\nexport default logout;","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport './header.css';\r\nimport logout from './helpers/Logout';\r\n\r\n\r\nconst Header = (props)=>{\r\n    return(\r\n<header>\r\n    <div className=\"header-bar\" >\r\n        <div className = \"logo\">Admin Panel</div>\r\n<ul>\r\n<li>\r\n    <Link to=\"/\" >{props.user}</Link>\r\n    </li>\r\n    <li>\r\n<Link to=\"/\" onClick={() => { logout() }}>Logout</Link>\r\n    </li>\r\n</ul>\r\n    </div>\r\n\r\n</header>\r\n    )\r\n}\r\n\r\nexport default Header;","\r\n//news article form\r\n\r\nimport React from 'react';\r\nimport './news.css';\r\nimport axios from 'axios';\r\n\r\nclass News extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state ={\r\n\r\n        }\r\n    }\r\n    handleChange = event => {\r\n      const target = event.target;\r\n      const value = target.name === 'image' ? target.files[0] : target.value;\r\n      const name = target.name;\r\n          this.setState({\r\n            [name]: value\r\n\r\n        });\r\n      }\r\n    \r\n \r\nhandleSubmit = async event => {\r\n  try{\r\n    const fd = new FormData();\r\n    fd.append(\"title\", this.state.title);\r\n    fd.append(\"description\", this.state.description);\r\n    fd.append(\"image\", this.state.image, this.state.image.name);\r\n    fd.append(\"date\", this.state.date);\r\n  \r\n     const url = `/article/${localStorage[\"userId\"]}`;\r\n      event.preventDefault()\r\n   const response = await  axios.post(\r\n url, \r\n fd,\r\n {\r\n  onUploadProgress: progressEvent => {\r\n    console.log(\"upload progress \" + Math.round((progressEvent.loaded / progressEvent.total)*100) + \"%\");\r\n  }}\r\n      );\r\n      if(response.status === 200){\r\n        alert(\"Article Added successfully\");\r\n window.location.reload();\r\n      \r\n      }\r\n  }catch(error){\r\n  console.log(error);\r\n  alert(error);\r\n  }\r\n     \r\n    }\r\n    render(){\r\n        return(\r\n            <div className=\"news-panel\">\r\n              <h2> Create News</h2>\r\n              <hr />\r\n              <br />\r\n              <form >\r\n      <fieldset>\r\n\r\n      <div>\r\n          <label htmlFor=\"title\" >Title:</label> <br />\r\n          <input\r\n            name=\"title\"\r\n            placeholder=\"Enter title\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}  \r\n            required\r\n          />\r\n        </div>\r\n<div>\r\n          <label htmlFor=\"description\" >body:</label> <br />\r\n          <textarea placeholder=\"Enter description\"\r\n          name=\"description\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}  \r\n            required\r\n       ></textarea>\r\n</div>\r\n<div>\r\n          <label htmlFor=\"file\" >Image Upload:</label> <br />\r\n          <input placeholder=\"select image\"\r\n          name=\"image\"\r\n          type=\"file\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}  \r\n       />\r\n</div>\r\n<div>\r\n          <label htmlFor=\"date\" >Date:</label> <br />\r\n          <input placeholder=\"E.g 21st December, 2018\"\r\n          name=\"date\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}  \r\n            required\r\n       />\r\n</div>\r\n        <button onClick={this.handleSubmit}>Submit</button>\r\n      </fieldset>\r\n    </form>\r\n  \r\n          </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default News;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst NewsListItem = (props)=>{\r\n\r\nconst deleteArticle= async (id)=>{\r\n    console.log(\"article id is: \" +id);\r\n    try{\r\n         const url = `/article/${id}/${localStorage['userId']}`;\r\n       const response = await  fetch(url,{\r\nmethod: 'delete',\r\nheaders: {\r\n  'Content-Type': 'application/json',\r\n  'authorization' : localStorage['token']\r\n},\r\n       }   \r\n       \r\n      );\r\n      console.log(response);\r\n          if(response.status === 200){\r\n            alert(\"Article deleted successfully\");\r\n     window.location.reload();\r\n          }\r\n      }catch(error){\r\n      console.log(error);\r\n      alert(error);\r\n      }\r\n         \r\n        }\r\n\r\n\r\n   return (<li>\r\n<em>{props.article.date_created}</em><br />\r\n<img src={\"/\" + props.article.image_url} alt=\"article\"/> <br />\r\n<Link to=\"#\"> {props.article.title}</Link>\r\n                <br />\r\n              <p>{props.article.description}</p>  \r\n                <br />\r\n<div className=\"list-action\"> <Link to={\"/edit/\" + props.article.id} article={props.article}><button id=\"edit\">Edit</button></Link> <span><button id=\"delete\" onClick={()=>{ \r\n if(window.confirm('Delete the item?')) {\r\n        //Logic to delete the item\r\n        deleteArticle(props.article.id);\r\n    }\r\n   }}>Delete</button></span></div>\r\n</li>)\r\n}\r\n\r\nexport default NewsListItem;","import React from 'react';\r\nimport './Loading.css';\r\n\r\n\r\n\r\n\r\nconst Loading = (props) => {\r\n \r\n\r\n  return <div className=\"Loading\" style={{width:'28px', height: '28px',}}/>;\r\n}\r\n\r\n\r\n\r\nexport default Loading;\r\n","import React from 'react';\r\nimport './newsList.css';\r\nimport NewsListItem from './newsListItem';\r\nimport Loading from './Loading';\r\n\r\nclass NewsList extends React.Component{\r\nconstructor(props){\r\n    super(props);\r\n    this.state = {\r\n        loading:false,\r\n        articles:[],\r\n\r\n    };\r\n}\r\n\r\ncomponentDidMount(){\r\n \r\nthis.getArticles();    \r\n}\r\n\r\nfetch  = async () =>{\r\n    this.setState({loading:true});\r\n    try{\r\n const url = '/articles';\r\n    const response = await fetch(url, {\r\nmethod: 'get'\r\n     })\r\n     return response.json();\r\n    \r\n}\r\n    catch(error){\r\nthis.setState({error});\r\n    }\r\n    \r\n}\r\n\r\ngetArticles = async () =>{\r\n    try{\r\n   const data = await this.fetch();\r\n   if(data===undefined){this.setState({error: \"Unable to load articles\"}); return}\r\n    this.setState({ loading: false, articles: data.data });\r\n    }\r\n    catch(error){\r\n        this.setState({error:error});\r\nconsole.log(error);\r\n    }\r\n \r\n}\r\n\r\n    render(){\r\n   const {loading, error, articles} = this.state;\r\n  \r\n    // render only loading component, if loading state is set to true\r\n    if (loading) {\r\n        return <div className=\"loading-container\"><Loading /> </div>\r\n      }\r\n  \r\n      // render only error message, if error occurred while fetching data\r\n      if (error) {\r\n        return <div className=\"error\">{error}</div>\r\n      }\r\n\r\n        return(\r\n            <div className=\"news-edit-panel\">\r\n            <div className=\"news\">\r\n               <h2>Latest News</h2>\r\n               <br />\r\n               <ul>\r\n               {articles.map(article=>{\r\n   return <NewsListItem key={article.id} article={article} />\r\n})}\r\n\r\n               \r\n               </ul>\r\n             \r\n             </div>\r\n         </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default NewsList;","import React from 'react';\r\nimport './admin.css';\r\nimport Header from './header';\r\nimport News from './news';\r\nimport NewsList from './newsList';\r\nimport withAuth from './services/withAuth';\r\n\r\nclass Admin extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state ={\r\n            loading:true,\r\nuser:'',\r\nerror:''\r\n        }\r\n    }\r\n\r\n    handleRerender = (userId) => {\r\n        console.log(\"rerendering\");\r\n        this.setState({\r\n        })\r\n      }\r\n\r\n   \r\n      componentDidMount(){\r\nthis.getUser();\r\nconsole.log(this.state.user);\r\n       \r\n    }\r\n\r\nfetch = async () =>{\r\n    try{\r\n const url = 'http://localhost:4000/user/'+localStorage['userId'];\r\n     const response =  await  fetch(url, {\r\n    method: 'get',\r\n    headers: {\r\n        // 'Content-Type': 'application/x-www-form-urlencoded',\r\n      'Content-Type': 'application/json',\r\n      'authorization' : localStorage['token']\r\n    },\r\n         })\r\n        return response.json();\r\n\r\n    }\r\n    catch(error){\r\nthis.setState({\r\n    error\r\n})\r\n    }    \r\n}\r\n\r\ngetUser = async () =>{\r\n    try{\r\n  const data = await this.fetch();\r\n    this.setState({ loading: false, user: data.data  });\r\n    }\r\n    catch(error){\r\nconsole.log(error);\r\n    }\r\n \r\n}\r\n\r\n    render(){\r\n       const{user} = this.state;\r\n        return(\r\n      \r\n            <div className=\"admin\">   \r\n                <Header user={user.firstname} />\r\n        <div className=\"panels\"> \r\n        \r\n         <News rerenderHandler ={this.handleRerender} /> \r\n     <NewsList />\r\n          </div>\r\n        </div>\r\n     \r\n        )\r\n    }\r\n}\r\n\r\nexport default withAuth(Admin);","import React, {Component} from 'react';\r\nimport checkLogin from '../helpers/checkLoggin';\r\nimport history from './history';\r\n\r\n\r\nconst withAuth = AuthComponent => {\r\n  return class AuthWrapped extends Component {\r\n    constructor (props) {\r\n      super (props);\r\n      this.state = {\r\n        isAutenticated: false,\r\n      };\r\n    }\r\n    \r\n    componentDidMount () {\r\n      //check if it's still authenticated\r\n      const isConfirmed = checkLogin ();\r\n\r\n      if (!isConfirmed) {\r\n        history.push ('/login');\r\n      } else {\r\n        this.setState ({\r\n          isAutenticated: true,\r\n        });\r\n      }\r\n    }\r\n\r\n    render () {\r\n      if (this.state.isAutenticated) {\r\n        return (\r\n          /* component that is currently being wrapper(App.js) */\r\n          <AuthComponent />\r\n        );\r\n      } else {\r\n        return null;\r\n      }\r\n    }\r\n  };\r\n};\r\nexport default withAuth;\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport history from '../components/services/history';\r\nimport './edit.css';\r\nimport axios from 'axios';\r\n\r\n\r\nclass Edit extends React.Component{\r\nconstructor(props){\r\n    super(props);\r\n    this.state = {};\r\n}\r\n\r\n\r\ncomponentDidMount(){\r\n  this.getArticles(); \r\n  }\r\n  \r\n  fetch  = async () =>{\r\n      try{\r\n        const url = `/article/${this.props.match.params.id}`;\r\n        const response = await fetch(url, {\r\n  method: 'get'\r\n       })\r\n       return response.json();\r\n      \r\n  }\r\n      catch(error){\r\n  this.setState({error});\r\n      }\r\n      \r\n  }\r\n  \r\n  getArticles = async () =>{\r\n      const data = await this.fetch();\r\n      const stateData=data.data[0];\r\n      this.setState(stateData);\r\n\r\n  }\r\n\r\n  handleChange = event => {\r\n    const target = event.target;\r\n    const value = target.name === 'image' ? target.files[0] : target.value;\r\n    const name = target.name;\r\n        this.setState({\r\n          [name]: value\r\n\r\n      });\r\n    }\r\n  \r\n\r\nhandleSubmit = async event => {\r\nconsole.log(this.state);\r\ntry{\r\n  const fd = new FormData();\r\n  fd.append(\"title\", this.state.title);\r\n  fd.append(\"description\", this.state.description);\r\n  fd.append(\"image\", this.state.image, this.state.image.name);\r\n  fd.append(\"date\", this.state.date);\r\n\r\n   const url = `http://localhost:4000/article/${this.props.match.params.id}`;\r\n    event.preventDefault()\r\n const response = await  axios.put(\r\nurl, \r\nfd,\r\n{\r\nonUploadProgress: progressEvent => {\r\n  console.log(\"upload progress \" + Math.round((progressEvent.loaded / progressEvent.total)*100) + \"%\");\r\n}}\r\n    );\r\n    if(response.status === 200){\r\n      alert(\"Article updated successfully\");\r\nhistory.push('/admin');\r\n    \r\n    }\r\n}catch(error){\r\nconsole.log(error);\r\nalert(error);\r\n}\r\n   \r\n  }\r\n\r\n    render(){\r\n        return( \r\n  \r\n            <div className=\"edit-form\">\r\n               \r\n                <div className=\"edit-news-panel\">\r\n          <div className=\"heading\"> <Link to=\"/admin\"><a>Go back</a> </Link>     <span> Edit news</span> </div>   \r\n          \r\n          <form >\r\n      <fieldset>\r\n\r\n      <div>\r\n          <label htmlFor=\"title\" >Title:</label> <br />\r\n          <input\r\n            name=\"title\"\r\n            placeholder=\"Enter title\"\r\n            value={this.state.title}\r\n            onChange={this.handleChange}  \r\n            required\r\n          />\r\n        </div>\r\n<div>\r\n          <label htmlFor=\"description\" >body:</label> <br />\r\n          <textarea placeholder=\"Enter description\"\r\n          name=\"description\"\r\n            value={this.state.description}\r\n            onChange={this.handleChange}  \r\n            required\r\n       > </textarea>\r\n</div>\r\n<div>\r\n          <label htmlFor=\"file\" >Image Upload:</label> <br />\r\n          <input placeholder=\"select image\"\r\n          name=\"image\"\r\n          type=\"file\"\r\n            value={this.state.value}\r\n            onChange={this.handleChange}  \r\n       />\r\n</div>\r\n<div>\r\n          <label htmlFor=\"date\" >Date:</label> <br />\r\n          <input placeholder=\"E.g 21st December, 2018\"\r\n          name=\"date\"\r\n            value={this.state.date_created}\r\n            onChange={this.handleChange}  \r\n            required\r\n       />\r\n</div>\r\n        <button onClick={this.handleSubmit}>Submit</button>\r\n      </fieldset>\r\n    </form>\r\n  \r\n          </div>\r\n            </div>\r\n       \r\n        );\r\n    }\r\n}\r\n\r\nexport default Edit;\r\n","import React from 'react';\nimport './App.css';\nimport {  Router, Switch, Route} from \"react-router-dom\";\nimport PageLogin from './components/login';\nimport Admin from './components/admin';\nimport EditArticle from './components/edit';\nimport History from './components/services/history';\n\n\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router history ={History}>\n      <Switch>\n        <Route exact path='/' component={Admin} />\n        <Route  path='/admin' component={Admin} />\n<Route  path ='/login' component={PageLogin} />\n<Route  path ='/edit/:id' component={EditArticle} />\n      </Switch>\n      </Router>\n\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n \n document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}